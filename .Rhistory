purrr::map_df(function(x) round(mean(is.na(x)),digits = 2)*100) %>%
gather(EVType, naAverage)
naAnalysis %>% ggplot(aes(x = cali_2019, y = naAverage)) %>% +
geom_point(aes(reorder(EVType, naAverage))) + theme(axis.text.x =
element_text(angle = 90, hjust = .1)) + labs(x = "Event Type",
y = "NA Average  (%)", title = "Missing Data Analysis")
cali_2019 <- cali_2019 %>%  select(-CBSA_CODE)
cali_2020 <- read.csv("Cali_2020.csv")
naAnalysis <- cali_2020 %>%
purrr::map_df(function(x) round(mean(is.na(x)),digits = 2)*100) %>%
gather(EVType, naAverage)
naAnalysis %>% ggplot(aes(x = cali_2020, y = naAverage)) %>% +
geom_point(aes(reorder(EVType, naAverage))) + theme(axis.text.x =
element_text(angle = 90, hjust = .1)) + labs(x = "Event Type",
y = "NA Average  (%)", title = "Missing Data Analysis")
cali_2020 <- cali_2020 %>%  select(-CBSA_CODE)
cali_2020 <- cali_2020 %>%  select(-CBSA_CODE)
cali_2019 <- cali_2019 %>%  select(-CBSA_CODE)
view(cali_2019)
cali_2019 %>% dplyr::filter(CBSA_NAME = "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
sf_2020 <- cali_2020 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA" && DATE >= 12/31/2019)
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA" && DATE >= 12/31/2019 && DATE <= 06/30/2020)
sf_2019
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA" && DATE >= 12/31/2019 || DATE <= 06/30/2020)
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA" && DATE >= "12/31/2019" || DATE <= "06/30/2020")
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA") %>% dplyr::filter(DATE >= "12/31/2019" || DATE <= "06/30/2020"))
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA") %>% dplyr::filter(DATE >= "12/31/2019" && DATE <= "06/30/2020"))
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA") %>% dplyr::filter(DATE >= "12/31/2019" && DATE <= "06/30/2020")
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA") %>% dplyr::filter(DATE >= date("12/31/2019") && DATE <= date("06/30/2020"))
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
sf_2020 <- cali_2020 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
sf_2019 %>% %>% dplyr::filter(DATE >= date("12/31/2019") && DATE <= date("06/30/2020"))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019") && DATE <= date("06/30/2020"))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019" && DATE <= date("06/30/2020"))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019" && DATE <= date("06/30/2020"))
sf_2019
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA")
sf_2019
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA")
sf_2019
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019" && DATE <= date("06/30/2020"))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019" && DATE <= date("06/30/2020")))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019") && DATE <= date("06/30/2020"))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019") || DATE <= date("06/30/2020"))
sf_2019 %>% dplyr::filter(DATE >= date("12/31/2019"))
sf_2019 %>% dplyr::filter(DATE >= "12/31/2019")
sf_2019 %>% dplyr::filter(Date >= date("12/31/2019")
sf_2019
sf_2019 %>% dplyr::filter(Date >= date("12/31/2019")
sf_2019 %>% dplyr::filter(Date >= date("12/31/2019"))
sf_2019 %>% dplyr::filter(Date >= date("12/31/2019")))
sf_2019 %>% dplyr::filter(Date >= date("12/31/2019"))
sf_2019 %>% dplyr::filter(Date >= "12/31/2019")
sf_2019 %>% dplyr::filter(Date > "12/31/2019" || Date < "07/01/2020")
sf_2019 %>% dplyr::filter(Date > "12/31/2019" || Date < "07/01/2019")
sf_2019 %>% dplyr::filter(Date > "12/31/2019" && Date < "07/01/2019")
sf_2019 %>% dplyr::filter(Date > "12/31/2019" && Date < "07/01/2019")
sf_2019 %>% dplyr::filter(Date > "12/31/2018" && Date < "07/01/2019")
sf_2019 %>% dplyr::filter(Date > "12/31/2018" || Date < "07/01/2019")
sf_2019 %>% dplyr::filter(Date > "12/31/2018" && Date < "07/01/2019")
sf_2019 %>% dplyr::filter(Date < "07/01/2019")
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2019")
sf_2019
sf_2020 <- cali_2020 %>% dplyr::filter(CBSA_NAME == "SAN FRANCISCO-OAKLAND-HAYWARD, CA") %>% dplyr::filter(Date < "07/01/2020")
sf_2020
sf_2020 <- cali_2020 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2020")
sf_2020
ggplot(data = sf_2019, aes(x=Daily.Mean.PM2.5.Concentration))+geom_boxplot()
ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()
ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot(aes(y=sf_2020$Daily.Mean.PM2.5.Concentration))
ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot(aes(y=sf_2020$Daily.Mean.PM2.5.Concentration))
ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot(data=sf2020,aes(y=sf_2020$Daily.Mean.PM2.5.Concentration))
ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot(data=sf_2020,aes(y=sf_2020$Daily.Mean.PM2.5.Concentration))
ggplot(data=sf_2020,aes(y=sf_2020$Daily.Mean.PM2.5.Concentration))
ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()
plot_grid(g1, g2)
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)
plot_grid(g1, g2)
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="")
plot_grid(g1, g2)
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)+labs(title = "2019")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "2020")
plot_grid(g1, g2)
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020")
plot_grid(g1, g2)
ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
ggplot(data = sf_2019, aes(x=Date, y = log(Daily.Mean.PM2.5.Concentration)))+geom_line()
ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4, row =1)
plot_grid(g3,g4, row =2)
plot_grid(g3,g4, col =2)
plot_grid(g3,g4, col =1)
plot_grid(g3,g4)
plot_grid(g3,g4,1)
plot_grid(g3,g4,2)
plot_grid(g3,g4,rows = 2)
library(lubridate)
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = Daily.Mean.PM2.5.Concentration))+geom_line()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4,rows = 2)
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = Daily.Mean.PM2.5.Concentration))+geom_line()
g3
g3 <- ggplot(data = sf_2019, aes(x=m(Date), y = Daily.Mean.PM2.5.Concentration))+geom_line()
g3
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = Daily.Mean.PM2.5.Concentration))+geom_line()
g3
class(sf_2019$Date)
mdy(sf_2019$Date)
sf_2019$Date<-mdy(sf_2019$Date)
sf_2019
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = Daily.Mean.PM2.5.Concentration))+geom_line()
g3
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = mean(Daily.Mean.PM2.5.Concentration)))+geom_line()
g3
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date > "03/01/2019")
sf_2019
sf_2019
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date > "03/01/2019")
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date > "2019-03-01")
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "2019-03-01")
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2019")
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
sf_2019 <- sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
sf_2020 <- sf_2020 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020")
plot_grid(g1, g2)
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(mean(Daily.Mean.PM2.5.Concentration))
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)))
g2
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g2
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")+geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
plot_grid(g1, g2)
subplot(g1, g2)
subplot(g1, g2)
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g2
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")+geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g1
subplot(g1, g2)
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")+geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")+geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g1
subplot(g1, g2)
g1 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(title = "PM2.5 2019")+geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g1 <- ggplot(data=sf_2019,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g1
g1 <- ggplot(data=sf_2019,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2019") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
subplot(g1, g2)
g1
g1 <- ggplotly(ggplot(data=sf_2019,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2019") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red"))
g2 <- ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red")
subplot(g1, g2)
g2
g2 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red"))
subplot(g1, g2)
plot_ly(sf_2019, y=Daily.Mean.PM2.5.Concentration) %>% add_trace()
plot_ly(sf_2019, y=Daily.Mean.PM2.5.Concentration, type = "box")
plot_ly(sf_2019, y=sf_2019$Daily.Mean.PM2.5.Concentration, type = "box")
plot_ly(sf_2019, y=sf_2019$Daily.Mean.PM2.5.Concentration, type = "box", quartilemethod ="exclusive")
subplot(g1, g2)
g3 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red"))
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = mean(Daily.Mean.PM2.5.Concentration)))+geom_line()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4,rows = 2)
sf_2019 <- cali_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2019")
sf_2019 <- sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
g1 <- ggplotly(ggplot(data=sf_2019,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2019") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red"))
g2 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") + geom_hline(aes(yintercept = mean(Daily.Mean.PM2.5.Concentration)), color="red"))
subplot(g1, g2)
subplot(g1, g2, nrows = 2)
subplot(g1)
subplot(g1,g2)
subplot(g2)
ggplotly(plot_grid(g1,g2)
ggplotly(plot_grid(g1,g2))
ggplotly(g1,g2))
subplot(plot_grid(g1,g2))
subplot(g1, g2)
subplot(g1, g2)
g2 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020") +
g2 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020")
subplot(g1, g2)
g2 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020"))
subplot(g1, g2)
g1 <- ggplotly(ggplot(data=sf_2019,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2019"))
g2 <- ggplotly(ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020"))
subplot(g1, g2)
subplot(g1, g2) %>% layout(boxmode = "group")
g2 <-ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020")
subplot(g1, g2)
subplot(g1)
g1 <-ggplot(data=sf_2019,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2019")
g2 <-ggplot(data=sf_2020,aes(y=Daily.Mean.PM2.5.Concentration))+geom_boxplot()+ylim(-5,35)+labs(y="", title = "PM2.5 2020")
subplot(g1)
subplot(g1,g2)
plot_grid(g1,g2)
quantile(sf_2019$Daily.Mean.PM2.5.Concentration)
plot_grid(g1,g2)
sf_2019$Date <- mdy(sf_2019$Date)
sf_2020$Date <- mdy(sf_2020$Date)
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = mean(Daily.Mean.PM2.5.Concentration)))+geom_line()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4,rows = 2)
g3 <- ggplot(data = sf_2019, aes(x=month(Date), y = Daily.Mean.PM2.5.Concentration))+geom_line()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4,rows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4,rows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+GeomSmooth
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020, method = "lm", aes(group=type), se=T)
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020, method = "lm",  se=T)
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020, method = "glm",  se=T)
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020, method = "rf",  se=T)
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020, method = "bi",  se=T)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020, method = "binomial",  se=T)
plot_grid(g3,g4,rows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)
plot_grid(g3,g4,rows = 2)
subplot(g3,g4,rows = 2)
subplot(g3,g4,rows = 2)
subplot(g3,g4)
subplot(g3,g4, nrows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+labs(title = 2019)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
library(lubridate)
sf_2019$Date <- mdy(sf_2019$Date)
sf_2020$Date <- mdy(sf_2020$Date)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+labs(title = 2019)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
subplot(g3,g4, nrows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+labs(title = 2019)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
g4
knitr::opts_chunk$set(echo = FALSE)
library(COVID19)
library(tidyquant)
library(plotly)
library(tidyverse)
library(cowplot)
US <- covid19("US", level = 1, verbose = FALSE)
ggplotly(
ggplot(data = US, aes(
x = date, y = (confirmed / 10 ^ 6)
)) +
geom_line() + geom_text(aes(
y = 2,
x = date("2020-05-01"),
label = "Confirmed (in millions)"
)) +
labs(x = "Months", y = "Confirmed (in millions)") +
geom_line(aes(y = deaths / 100000), color = "maroon", alpha = .5) +
geom_text(
aes(
y = 1.39,
x = date("2020-06-11"),
label = "Deaths (in 100,000th)"
), color = "maroon"
) +
geom_line(
aes(y = recovered / 10 ^ 6),
color = "blue",
alpha = .5,
label = "recovered"
) +
geom_text(aes(
y = .80,
x = date("2020-06-09"),
label = "Recovered (in millions)"
), color = "blue") + theme(legend.position = "none") + xlim(date("2020-01-31"), date("2020-07-06")) +
ylim(0, 3)
)
UR <- tq_get("UNRATE", get = "economic.data", from = "1950-01-01")
ggplotly(ggplot(data = UR, aes(x=date, y=price))+geom_line()+labs(x="Date", y="Rate"))
## download state UR
## If we need the code for story telling by state
all_states <- function(state_code) {
fred_code <- str_c(state_code, "UR")
tq_get(fred_code, get = "economic.data",
from = "1950-01-01") %>%
mutate(state = state_code)
}
all_state_ur <- map_dfr(state.abb, all_states)
GDP <- tq_get("GDP", get = "economic.data", from = "2016-01-01")
ggplotly(ggplot(data = GDP, aes(x=date, y=price))+geom_line()+labs(x="Year", y="Date"))
cali_2019 <- read.csv("Cali_2019.csv")
cali_2020 <- read.csv("Cali_2020.csv")
naAnalysis <- cali_2020 %>%
purrr::map_df(function(x)
round(mean(is.na(x)), digits = 2) * 100) %>%
gather(EVType, naAverage)
naAnalysis %>% ggplot(aes(x = cali_2020, y = naAverage)) %>% +geom_point(aes(reorder(EVType, naAverage))) + theme(axis.text.x =
element_text(angle = 90, hjust = .1)) + labs(x = "Event Type",
y = "NA Average  (%)", title = "Missing Data Analysis")
cali_2019 <- cali_2019 %>%  select(-CBSA_CODE)
cali_2020 <- cali_2020 %>%  select(-CBSA_CODE)
sf_2019 <-
cali_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2019")
sf_2019 <-
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
sf_2020 <-
cali_2020 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2020")
sf_2020 <-
sf_2020 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
g1 <-
ggplot(data = sf_2019,
aes(y = Daily.Mean.PM2.5.Concentration)) +
geom_boxplot() +
ylim(-5, 35) +
labs(y = "", title = "PM2.5 2019")
g2 <-
ggplot(data = sf_2020,
aes(y = Daily.Mean.PM2.5.Concentration)) +
geom_boxplot() +
ylim(-5, 35) + labs(y = "", title = "PM2.5 2020")
plot_grid(g1, g2)
library(lubridate)
sf_2019$Date <- mdy(sf_2019$Date)
sf_2020$Date <- mdy(sf_2020$Date)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+labs(title = 2019)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+labs(title = 2019)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019"
))
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019", size=20
))
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+labs(title = 2020)
subplot(g3,g4, nrows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))
subplot(g3,g4, nrows = 2)
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_density()+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))
g4
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_density(aes(y=Daily.Mean.PM2.5.Concentration))+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))
g4
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))
g4
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))+geom_density()
g4
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))
subplot(g3,g4, nrows = 2)
g3 <- ggplot(data = sf_2019, aes( y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019", size=20
))
g3 <- ggplot(data = sf_2019, aes( y = Daily.Mean.PM2.5.Concentration))+geom_density()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019", size=20
))
g3
g3 <- ggplot(data = sf_2019, aes(  Daily.Mean.PM2.5.Concentration))+geom_density()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019", size=20
))
g3
g3 <- ggplot(data = sf_2019, aes(y=Daily.Mean.PM2.5.Concentration))+geom_density()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019", size=20
))
x=Date,
x=Date,
g3 <- ggplot(data = sf_2019, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth()+ geom_text(aes(
y = 15,
x = date("2019-03-01"),
label = "2019", size=20
))
g4 <- ggplot(data = sf_2020, aes(x=Date, y = Daily.Mean.PM2.5.Concentration))+geom_line()+geom_smooth(data = sf_2020,  se=T)+geom_text(aes(
y = 15,
x = date("2020-03-01"),
label = "2020", size=20
))
subplot(g3,g4, nrows = 2)
ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration))
ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration))+geom_density()
ggplot(data = sf_2020, aes(Daily.Mean.PM2.5.Concentration))+geom_density()
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration))+geom_density()
g6<-ggplot(data = sf_2020, aes(Daily.Mean.PM2.5.Concentration))+geom_density()
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration))+geom_density(color=month(Date))
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration, color=month(Date)))+geom_density()
g5
sf_2019 %>% mutate(Month=month(Date))
sf_2019 <- sf_2019 %>% mutate(Month=month(Date))
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration, color=Month))+geom_density()
g5
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration, color=Month))+geom_density()
g5
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration), fill=Month)+geom_density()
g5
g5<-ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration), color=Month)+geom_density()
g5
ggplot(data = sf_2019, aes(Daily.Mean.PM2.5.Concentration, color=Month))+geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration,
color='Month'))+
geom_density()
sf_2019
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration,
col='Month'))+
geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration))+
geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration))+
geom_density()+facet_wrap(~Month)
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration))+
geom_density(aes(color='Month'))
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration))+
geom_density(aes(color=Month))
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration), color='Month')+
geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration), color='Month')+
geom_density()
sf_2019 <-
cali_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2019")
sf_2019 <-
sf_2019 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
sf_2020 <-
cali_2020 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date < "07/01/2020")
sf_2020 <-
sf_2020 %>% dplyr::filter(CBSA_NAME == "San Francisco-Oakland-Hayward, CA") %>% dplyr::filter(Date >= "03-01-2019")
sf_2019$Date <- mdy(sf_2019$Date)
sf_2020$Date <- mdy(sf_2020$Date)
sf_2019 <- sf_2019 %>% mutate(M.no=month(Date))
aes(Daily.Mean.PM2.5.Concentration, color=M.no)')+
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration, color=M.no))+
geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration, color=M.no))+
geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration, color=M.no))+
geom_density()
g6<-ggplot(data = sf_2020, aes(Daily.Mean.PM2.5.Concentration))+geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration, color=M.no))+
geom_density()
ggplot(data = sf_2019,
aes(Daily.Mean.PM2.5.Concentration, color=M.no))+
geom_density()
sf_2019
